{% extends 'base.html' %}
{% load static %}
{% block title %}
  Citas Agendadas
{% endblock %}
{% block content %}
  <main id="main">
    <section id="appointment" class="appointment section-bg mt-5">
      <div class="container">
        <div class="section-title pt-5">
          <h2>Citas Agendadas</h2>
          <p>Estas son las citas que tienes agendadas</p>
        </div>
        <div class="row">
          {% if mensaje %}
            <div class="d-flex flex-column flex-md-row p-4 gap-4 py-md-5 align-items-center justify-content-center">
              <h2 class="text-center">{{ mensaje }}</h2>
            </div>
          {% else %}
          
          {% if citas %}

            <table class="table table-striped table-hover table-responsive">
              <thead class="table-dark">
                <tr>
                  <th scope="col">Paciente</th>
                  <th scope="col">Profesional</th>
                  <th scope="col">Fecha de inicio</th>
                  <th scope="col">Hora de inicio</th>
                  <th scope="col">Hora de fin</th>
                  <th scope="col">Estado</th>
                  <th scope="col">Resumen</th>
                </tr>
              </thead>
              <tbody>
                {% for cita in citas %}
                <tr>
                    <td>{{ cita.paciente.usuario.username }}</td>
                    <td>{{ cita.profesional.usuario.username }}</td>
                    <td>{{ cita.fecha_inicio }}</td>
                    <td>{{ cita.fecha_inicio_hora }}</td>
                    <td>{{ cita.fecha_fin_hora }}</td>
                    <td>{{ cita.estado }}</td>
                    <td>{% if cita.resumen %}{{ cita.resumen }}{% endif %}</td>
                </tr>                
                {% endfor %}
              </tbody>
            </table>
            {% else %}
            <p class="text-center"><b>No tienes citas agendadas</b></p>
            {% endif %}
          {% endif %}
        </div>
      </div>
    </section>
  </main>
{% endblock %}
